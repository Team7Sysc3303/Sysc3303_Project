/** Reader.java
 *
 * The reader for version 0 of readers/writers.
 *
 * @author L.Marshall, 
 * Systems and Computer Engineering,
 * Carleton University
 * @version 1.0
 */

class Reader implements Runnable
{
    Database buffer;
    
    public Reader(Database buf)
    {
        buffer = buf;
    }

    public void run()
    {
        Object item;

        // read 10 times sleeping during / after each request to simulate time passing
        for(int i = 0; i < 10; i++) { 
            buffer.startRead();

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {}

            item = buffer.endRead(i%5);

            System.out.println(Thread.currentThread().getName() + " read " + item);

            //try {
            //    Thread.sleep(500);
            //} catch (InterruptedException e) {}
        }
    }
}
